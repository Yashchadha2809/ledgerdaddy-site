<!doctype html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CHA.AI ‚Äî The First AI-Powered CHA Marketplace (India)</title>
  <meta name="description" content="Find verified CHAs, get instant HS code & duty estimates, and clear shipments faster at any Indian port." />
  <meta name="theme-color" content="#0B1B3B" id="meta-theme-color" />
  <style>
    /* ================= Brand Tokens (Navy / Teal / Sky / Warm Gray) ================= */
    :root{
      --navy:#0B1B3B; --teal:#1BB5A6; --sky:#C7F3F0; --warm:#F5F7FA; --ink:#0f172a;
      --bg:#0B1B3B; --panel:#0e2452; --soft:#113062; --text:#F5F7FA; --muted:#D7E1EF; --border:#1e3a6a;
      --accent:#1BB5A6; --badge:#C7F3F0; --focus:#f59e0b; --radius:14px; --shadow:0 14px 34px rgba(3,10,28,.35)
    }
    [data-theme="light"]{
      --bg:#F5F7FA; --panel:#ffffff; --soft:#eef2f7; --text:#0B1B3B; --muted:#51607a; --border:#e3e9f2; --shadow:0 14px 28px rgba(2,6,23,.06)
    }
    /* ================= Base / Utilities ================= */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans",sans-serif;line-height:1.55;
      background:
        radial-gradient(1200px 600px at 15% -10%, rgba(27,181,166,.20), transparent 55%),
        radial-gradient(1200px 600px at 85% -10%, rgba(199,243,240,.20), transparent 55%),
        var(--bg);color:var(--text)}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    :focus-visible{outline:2px solid var(--focus);outline-offset:3px}
    .container{width:min(1180px,92%);margin-inline:auto}
    .section{padding:3.2rem 0}
    .card{background:linear-gradient(0deg, rgba(255,255,255,.03), transparent), var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:1.2rem}
    .btn{display:inline-flex;align-items:center;gap:.5rem;padding:.7rem 1rem;border-radius:12px;border:1px solid var(--border);cursor:pointer;transition:transform .05s,box-shadow .2s}
    .btn:active{transform:translateY(1px)} .btn--primary{background:linear-gradient(135deg,var(--teal),#12a895);color:#043b37;border-color:transparent}
    .btn--ghost{background:var(--panel);color:var(--text)}
    .badge{display:inline-flex;align-items:center;gap:.35rem;padding:.22rem .55rem;border:1px solid var(--border);border-radius:999px;background:var(--soft);color:var(--muted);font-size:.85rem}
    .chip{display:inline-flex;align-items:center;gap:.35rem;padding:.25rem .6rem;border-radius:999px;border:1px solid var(--border);background:var(--badge);color:#084b45;font-weight:600}
    .muted{color:var(--muted)} .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .grid{display:grid;gap:1rem}
    @media (min-width: 980px){ .grid--2{grid-template-columns:1fr 1fr} .grid--3{grid-template-columns:repeat(3,1fr)} }

    /* ================= Header / Nav ================= */
    .header{position:sticky;top:0;z-index:70;backdrop-filter:blur(12px);background:rgba(11,27,59,.6);border-bottom:1px solid var(--border)}
    [data-theme="light"] .header{background:rgba(255,255,255,.7)}
    .header__inner{display:flex;align-items:center;justify-content:space-between;padding:.75rem 0}
    .brand{display:flex;align-items:center;gap:.65rem}
    .brand__logo{width:36px;height:36px;border-radius:10px;background:conic-gradient(from 180deg,var(--teal),var(--sky),#a8e7e2,var(--teal));display:grid;place-items:center;color:#043b37;font-weight:800;box-shadow:var(--shadow)}
    .nav{display:flex;gap:1rem;align-items:center}
    .nav__menu{display:flex;gap:1rem;list-style:none;margin:0;padding:0}
    .nav__link{color:var(--muted)} .nav__link:hover{color:var(--text)}
    .nav__toggle{display:none}
    .auth{display:flex;gap:.6rem;align-items:center}
    @media (max-width:980px){
      .nav__toggle{display:inline-block;border:1px solid var(--border);background:var(--panel);color:var(--text);padding:.5rem .7rem;border-radius:.6rem}
      .nav__menu{display:none;position:absolute;right:1rem;top:60px;background:var(--panel);padding:.75rem;border-radius:.6rem;border:1px solid var(--border)}
      .nav__menu.is-open{display:flex;flex-direction:column}
    }

    /* ================= Hero ================= */
    .hero{padding:3rem 0}
    .hero__wrap{display:grid;gap:1.2rem;grid-template-columns:1.2fr .8fr;align-items:center}
    @media (max-width:980px){.hero__wrap{grid-template-columns:1fr}}
    .hero__title{font-size:clamp(1.9rem,3.6vw,2.6rem);margin:0}
    .hero__img{border-radius:18px;overflow:hidden;border:1px solid var(--border)}
    .hero__img>img{width:100%;height:100%;object-fit:cover}

    /* ================= Forms ================= */
    .form__row{display:grid;gap:.35rem;margin-bottom:.6rem}
    .form__label{font-weight:600}
    .form__input,.form__select,.form__area{background:var(--soft);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:.6rem .7rem}

    /* ================= Marketplace ================= */
    .layout{display:grid;gap:1rem;grid-template-columns:280px 1fr}
    @media (max-width:1100px){ .layout{grid-template-columns:1fr} }
    .filters{position:sticky;top:76px}
    .filter__drawer{display:none}
    @media (max-width:1100px){
      .filters{display:none}
      .filter__drawer{display:flex;justify-content:space-between;margin-bottom:.6rem}
      .drawer{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none}
      .drawer__panel{position:absolute;left:0;top:0;height:100%;width:85%;max-width:360px;background:var(--panel);border-right:1px solid var(--border);padding:1rem;overflow:auto}
      .drawer.is-open{display:block}
    }
    .market__grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .card--listing:hover{transform:translateY(-2px);box-shadow:var(--shadow);transition:transform .12s,box-shadow .2s}
    .listing__meta{display:flex;align-items:center;justify-content:space-between;gap:.6rem;flex-wrap:wrap}
    .listing__footer{display:flex;align-items:center;justify-content:space-between;gap:.6rem;flex-wrap:wrap}
    .stars{color:#fbbf24}

    /* ================= Tabs (Profile) ================= */
    .tabs{display:flex;gap:.4rem;flex-wrap:wrap;border-bottom:1px solid var(--border);margin:.8rem 0}
    .tab{padding:.45rem .75rem;border:1px solid var(--border);border-bottom:none;border-radius:10px 10px 0 0;background:var(--soft);cursor:pointer}
    .tab[aria-selected="true"]{background:var(--badge);color:#084b45}

    /* ================= Sticky CTA (mobile) ================= */
    .sticky-cta{position:sticky;bottom:0;z-index:40;background:var(--panel);border-top:1px solid var(--border);padding:.6rem;display:none}
    @media (max-width:700px){ .sticky-cta{display:block} }

    /* ================= FAB: WhatsApp ================= */
    .whatsapp{position:fixed;left:1rem;bottom:1rem;background:#25D366;color:white;border-radius:999px;padding:.7rem 1rem;box-shadow:var(--shadow);z-index:80}

    /* ================= Chat (placeholder quick replies) ================= */
    .chat{position:fixed;right:1rem;bottom:1rem;z-index:80}
    .chat__toggle{width:60px;height:60px;border-radius:999px;border:none;background:linear-gradient(135deg,var(--teal),#0bd4c2);color:#043b37;box-shadow:var(--shadow);cursor:pointer}
    .chat__panel{position:fixed;right:1rem;bottom:4.8rem;width:min(380px,92vw);background:var(--panel);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);overflow:hidden}
    .chat__header{display:flex;justify-content:space-between;align-items:center;padding:.65rem .8rem;background:var(--soft);border-bottom:1px solid var(--border)}
    .chat__log{max-height:340px;overflow:auto;padding:.8rem;display:grid;gap:.5rem}
    .bubble{padding:.55rem .75rem;border-radius:12px;max-width:85%}
    .bubble--me{justify-self:end;background:linear-gradient(135deg,var(--teal),#8be9e1);color:#043b37}
    .bubble--ai{background:var(--soft);border:1px solid var(--border)}
    .chat__form{display:flex;gap:.45rem;padding:.6rem;border-top:1px solid var(--border)}
    .chat__input{flex:1;background:var(--soft);border:1px solid var(--border);border-radius:10px;padding:.55rem .7rem;color:var(--text)}
  </style>
</head>
<body>
  <a class="sr-only" href="#main">Skip to content</a>

  <!-- ================= Header ================= -->
  <header class="header">
    <div class="container header__inner">
      <a class="brand" href="#/home" aria-label="Home"><span class="brand__logo">‚óÜ</span><strong>CHA.AI</strong></a>
      <nav class="nav" aria-label="Primary">
        <button class="nav__toggle" id="navToggle" aria-expanded="false" aria-controls="navMenu">Menu</button>
        <ul class="nav__menu" id="navMenu">
          <li><a class="nav__link" href="#/marketplace">Marketplace</a></li>
          <li><a class="nav__link" href="#/calculator">Duty Calculator</a></li>
          <li><a class="nav__link" href="#/learn">Learn</a></li>
          <li><a class="nav__link" href="#/pricing">Pricing</a></li>
        </ul>
      </nav>
      <div class="auth">
        <button class="btn btn--ghost" id="themeToggle" aria-pressed="false" aria-label="Toggle dark/light">üåó</button>
        <a class="btn" href="#/auth?mode=signin">Sign in</a>
        <a class="btn btn--primary" href="#/auth?mode=signup">Create Account</a>
      </div>
    </div>
  </header>

  <main id="main">
    <!-- ================= HOME ================= -->
    <section id="home" class="section">
      <div class="container hero">
        <div class="hero__wrap">
          <div>
            <h1 class="hero__title">Clear your shipments faster at any Indian port.</h1>
            <p class="muted">Verified CHAs + instant HS code & duty estimates.</p>
            <div style="display:flex;gap:.6rem;flex-wrap:wrap;margin:.9rem 0">
              <a class="btn btn--primary" href="#/marketplace">Find a CHA</a>
              <a class="btn btn--ghost" href="#/calculator">Calculate Duty</a>
            </div>

            <!-- Quick Search -->
            <div class="card" role="search" aria-label="Quick search">
              <div class="grid grid--2">
                <div class="form__row">
                  <label class="form__label" for="qsPort">Port</label>
                  <select id="qsPort" class="form__select"></select>
                </div>
                <div class="form__row">
                  <label class="form__label" for="qsService">Service type</label>
                  <select id="qsService" class="form__select">
                    <option>Clearance only</option><option>Clearance + Transport</option>
                    <option>Drawback</option><option>Bonded warehousing</option>
                    <option>License handling</option>
                  </select>
                </div>
                <div class="form__row">
                  <label class="form__label" for="qsCommodity">Commodity / HS</label>
                  <input id="qsCommodity" class="form__input" placeholder="e.g., mobile phones / 8517" />
                </div>
                <div class="form__row" style="align-self:end">
                  <button id="qsSearch" class="btn btn--primary">Search</button>
                </div>
              </div>
              <div style="display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.5rem">
                <span class="badge">IEC-verified partners</span>
                <span class="badge">PAN/KYC verified</span>
                <span class="badge">4.9‚òÖ avg rating</span>
                <span class="badge">ISO/ACI ready</span>
              </div>
            </div>
          </div>
          <figure class="hero__img">
            <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=1200&auto=format&fit=crop" width="1200" height="800" alt="Modern marketplace and calculator preview" />
          </figure>
        </div>
      </div>

      <div class="container section">
        <h2>How it works</h2>
        <div class="grid grid--3">
          <div class="card"><strong>1) Tell us port & commodity</strong><p class="muted">Pick the port, mode, and share commodity/HS.</p></div>
          <div class="card"><strong>2) Compare verified CHAs</strong><p class="muted">Profiles with licenses, reviews, and response time.</p></div>
          <div class="card"><strong>3) Book & track clearance</strong><p class="muted">Message, accept quotes, and track SLAs.</p></div>
        </div>
      </div>

      <div class="container section">
        <div class="card grid grid--2">
          <div>
            <h2>Get a duty estimate in 30 seconds</h2>
            <p class="muted">Enter HS and assessable value. See BCD, SWS, AIDC, IGST & total.</p>
            <div class="grid grid--2">
              <div class="form__row"><label class="form__label" for="teaserHS">HS code</label><input id="teaserHS" class="form__input" placeholder="e.g., 851713" /></div>
              <div class="form__row"><label class="form__label" for="teaserAV">Assessable Value (‚Çπ)</label><input id="teaserAV" type="number" class="form__input" placeholder="100000" /></div>
            </div>
            <button id="teaserCalc" class="btn btn--primary">Estimate</button>
            <div id="teaserOut" style="display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.7rem"></div>
            <p style="margin-top:.6rem"><a href="#/calculator" class="nav__link">Open the full duty & landed-cost calculator ‚Üí</a></p>
          </div>
          <img class="card" alt="Calculator preview" src="https://images.unsplash.com/photo-1556157382-97eda2d62296?q=80&w=1200&auto=format&fit=crop" />
        </div>
      </div>

      <div class="container section">
        <h2>Featured CHAs</h2>
        <div id="featuredGrid" class="market__grid"></div>
      </div>

      <div class="container section">
        <h2>Proof & Reviews</h2>
        <div class="grid grid--3">
          <figure class="card"><blockquote>‚ÄúFound a reliable CHA at JNPT in minutes. Duty estimate matched.‚Äù</blockquote><figcaption class="muted">‚Äî Anika G., Electronics</figcaption></figure>
          <figure class="card"><blockquote>‚ÄúQualified leads with verification. Our response-time badge helps.‚Äù</blockquote><figcaption class="muted">‚Äî S. Patel, CHA</figcaption></figure>
          <figure class="card"><blockquote>‚ÄúTransparent quotes + tracked SLAs. CFO loves the landed-cost PDF.‚Äù</blockquote><figcaption class="muted">‚Äî Raj M., Apparel</figcaption></figure>
        </div>
      </div>

      <div class="container section">
        <h2>FAQs</h2>
        <div class="grid grid--2">
          <details class="card"><summary><strong>How do you verify CHAs?</strong></summary><p class="muted">PAN, CHA license, GSTIN, AEO status, office checks. Manual review before badges.</p></details>
          <details class="card"><summary><strong>How accurate are HS suggestions?</strong></summary><p class="muted">We show 2‚Äì3 likely HS codes with confidence and examples. Final classification rests with customs.</p></details>
          <details class="card"><summary><strong>Fees?</strong></summary><p class="muted">Browsing free. Platform fee displayed in quotes. Optional escrow/milestones.</p></details>
          <details class="card"><summary><strong>Disputes?</strong></summary><p class="muted">Evidence-based moderation with refund/credit policy.</p></details>
          <details class="card"><summary><strong>Coverage?</strong></summary><p class="muted">All major sea & air ports + ICDs across India.</p></details>
          <details class="card"><summary><strong>Support?</strong></summary><p class="muted">Email & WhatsApp 9am‚Äì9pm IST; priority SLA on paid plans.</p></details>
        </div>
      </div>
    </section>

    <!-- ================= MARKETPLACE ================= -->
    <section id="marketplace" class="section" hidden>
      <div class="container">
        <div class="filter__drawer">
          <strong>Filters</strong>
          <button class="btn" id="openFilters">Open</button>
        </div>
        <div class="layout">
          <aside class="filters card" id="filters">
            <h3>Refine search</h3>
            <div class="form__row"><label class="form__label" for="fPort">Port</label><select id="fPort" class="form__select"></select></div>
            <div class="form__row"><label class="form__label" for="fMode">Mode</label><select id="fMode" class="form__select"><option>Sea FCL</option><option>Sea LCL</option><option>Air</option><option>Courier</option><option>ICD</option></select></div>
            <div class="form__row"><label class="form__label" for="fServices">Services</label><select id="fServices" class="form__select"><option>Clearance only</option><option>Clearance + Transport</option><option>Drawback</option><option>Bonded warehousing</option><option>License handling</option></select></div>
            <div class="form__row"><label class="form__label" for="fBudget">Budget (‚Çπ max)</label><input id="fBudget" type="number" class="form__input" placeholder="50000" /></div>
            <div class="form__row"><label class="form__label" for="fSpeed">Quote speed</label><select id="fSpeed" class="form__select"><option>Any</option><option>Under 2h</option><option>Same day</option></select></div>
            <div class="form__row"><label class="form__label" for="fLang">Languages</label><select id="fLang" class="form__select"><option>EN</option><option>Hindi</option><option>EN + Hindi</option></select></div>
            <div class="form__row"><label class="form__label" for="fSLA">SLA tier</label><select id="fSLA" class="form__select"><option>Standard</option><option>Express</option></select></div>
            <div class="form__row"><label class="form__label">Badges</label>
              <div style="display:flex;gap:.6rem;flex-wrap:wrap">
                <label><input type="checkbox" id="bVerified"/> Verified</label>
                <label><input type="checkbox" id="bTopRated"/> Top Rated</label>
                <label><input type="checkbox" id="bFast"/> Fast responder</label>
                <label><input type="checkbox" id="bAEO"/> AEO-certified</label>
              </div>
            </div>
            <button class="btn btn--primary" id="applyFilters">Apply</button>
          </aside>

          <div>
            <div class="card" style="display:flex;gap:.6rem;align-items:center;justify-content:space-between;flex-wrap:wrap">
              <div><strong>CHAs</strong> <span class="muted" id="countSpan">‚Äî</span></div>
              <div style="display:flex;gap:.6rem;align-items:center">
                <input id="fSearch" class="form__input" placeholder="Search CHA or HS/commodity..." />
                <select id="fSort" class="form__select">
                  <option value="featured">Featured</option>
                  <option value="rating">Rating</option>
                  <option value="price">Starting price</option>
                  <option value="speed">Response time</option>
                </select>
              </div>
            </div>
            <div id="listGrid" class="market__grid" role="list"></div>
          </div>
        </div>
      </div>

      <!-- Mobile filter drawer -->
      <div id="drawer" class="drawer" aria-hidden="true">
        <div class="drawer__panel card">
          <div style="display:flex;justify-content:space-between;align-items:center"><h3>Filters</h3><button class="btn" id="closeFilters">Close</button></div>
          <div id="drawerFilters"></div>
        </div>
      </div>

      <!-- Compare tray -->
      <div id="compareTray" class="card" style="position:sticky;bottom:1rem;max-width:1180px;margin:1rem auto;display:none">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:.6rem;flex-wrap:wrap">
          <div><strong>Compare</strong> <span id="compareNames" class="muted"></span></div>
          <div style="display:flex;gap:.5rem">
            <button class="btn" id="clearCompare">Clear</button>
            <button class="btn btn--primary" id="openCompare">View</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ================= PROFILE ================= -->
    <section id="profile" class="section" hidden>
      <div class="container">
        <div id="profileHeader" class="card"></div>
        <div class="tabs" role="tablist" aria-label="CHA profile tabs" id="profileTabs"></div>
        <div id="profileBody" class="card"></div>
        <div class="sticky-cta">
          <div style="display:flex;gap:.5rem;justify-content:space-between">
            <a class="btn" href="#/rfp">Message</a>
            <a class="btn btn--primary" href="#/rfp">Get Quote</a>
            <a class="btn" href="tel:+910000000000">Call</a>
          </div>
        </div>
      </div>
    </section>

    <!-- ================= CALCULATOR ================= -->
    <section id="calculator" class="section" hidden>
      <div class="container card">
        <h2>Duty & Landed Cost (India)</h2>
        <div class="grid grid--2">
          <div>
            <div class="form__row"><label class="form__label" for="cPort">Destination Port/ICD</label><select id="cPort" class="form__select"></select></div>
            <div class="form__row"><label class="form__label" for="cOrigin">Country of Origin</label><input id="cOrigin" class="form__input" placeholder="e.g., CN, VN, US" /></div>
            <div class="form__row"><label class="form__label" for="cIncoterm">Incoterm / Valuation</label><select id="cIncoterm" class="form__select"><option value="CIF">CIF</option><option value="FOB">FOB</option><option value="EXW">EXW</option></select></div>

            <div class="grid grid--2">
              <div class="form__row"><label class="form__label" for="cGoods">Goods Value (‚Çπ)</label><input id="cGoods" type="number" class="form__input" placeholder="100000" /></div>
              <div class="form__row"><label class="form__label" for="cFreight">Freight (‚Çπ)</label><input id="cFreight" type="number" class="form__input" placeholder="10000" /></div>
              <div class="form__row"><label class="form__label" for="cInsurance">Insurance (‚Çπ)</label><input id="cInsurance" type="number" class="form__input" placeholder="1000" /></div>
              <div class="form__row"><label class="form__label" for="cOther">Other includable (‚Çπ)</label><input id="cOther" type="number" class="form__input" placeholder="0" /></div>
            </div>

            <div class="grid grid--2">
              <div class="form__row"><label class="form__label" for="cHS">HS code</label><input id="cHS" class="form__input" placeholder="e.g., 851713" /></div>
              <div class="form__row"><label class="form__label" for="cQty">Quantity / UoM</label><input id="cQty" class="form__input" placeholder="100 pcs" /></div>
            </div>

            <details class="card"><summary><strong>Rates & options</strong> (enter known rates; connect tariff API later)</summary>
              <div class="grid grid--3" style="margin-top:.6rem">
                <div class="form__row"><label class="form__label" for="rBCD">BCD %</label><input id="rBCD" type="number" class="form__input" placeholder="10" /></div>
                <div class="form__row"><label class="form__label" for="rIGST">IGST %</label><input id="rIGST" type="number" class="form__input" placeholder="18" /></div>
                <div class="form__row"><label class="form__label" for="rAIDC">AIDC %</label><input id="rAIDC" type="number" class="form__input" placeholder="0" /></div>
                <div class="form__row"><label class="form__label" for="rCess">Comp. Cess %</label><input id="rCess" type="number" class="form__input" placeholder="0" /></div>
                <div class="form__row"><label class="form__label" for="optSWS">Apply SWS (10% of BCD)</label><select id="optSWS" class="form__select"><option>Yes</option><option>No</option></select></div>
                <div class="form__row"><label class="form__label" for="optFTA">Preferential FTA</label><select id="optFTA" class="form__select"><option>No</option><option>Yes</option></select></div>
              </div>
            </details>

            <div style="display:flex;gap:.6rem;margin-top:.8rem">
              <button id="calcBtn" class="btn btn--primary">Calculate</button>
              <button id="calcShare" class="btn">Share link</button>
              <button id="calcPDF" class="btn">Download PDF</button>
              <button id="calcSaveAsRFP" class="btn">Save as RFP</button>
            </div>
          </div>

          <div>
            <h3>Breakdown</h3>
            <table class="card" style="width:100%;border-collapse:separate;border-spacing:.4rem">
              <tbody id="calcTable">
                <!-- rows injected -->
              </tbody>
            </table>
            <p class="muted" id="rateStamp"></p>
            <div id="hsSuggestions" class="card" hidden>
              <strong>HS suggestions (beta)</strong>
              <ul id="hsList"></ul>
              <p class="muted">Final classification rests with customs. Review examples/risk notes.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ================= RFP (QUOTE REQUEST) ================= -->
    <section id="rfp" class="section" hidden>
      <div class="container card">
        <h2>Request for Quote (RFP)</h2>
        <div style="display:flex;gap:.5rem;flex-wrap:wrap;margin:.5rem 0">
          <span class="chip" data-step="1">1) Shipment</span>
          <span class="chip" data-step="2">2) Documents</span>
          <span class="chip" data-step="3">3) SLA</span>
          <span class="chip" data-step="4">4) Send</span>
        </div>
        <div id="rfpBody" style="margin-top:1rem"></div>
      </div>
    </section>

    <!-- ================= AUTH ================= -->
    <section id="auth" class="section" hidden>
      <div class="container grid grid--2">
        <form class="card" id="signinForm">
          <h3>Sign in</h3>
          <div class="form__row"><label class="form__label" for="siEmail">Email</label><input id="siEmail" class="form__input" type="email" required /></div>
          <div class="form__row"><label class="form__label" for="siPass">Password</label><input id="siPass" class="form__input" type="password" required /></div>
          <button class="btn btn--primary" type="submit">Sign in</button>
        </form>
        <form class="card" id="signupForm">
          <h3>Create account</h3>
          <div class="form__row"><label class="form__label" for="suRole">I am</label><select id="suRole" class="form__select"><option>Importer</option><option>CHA</option></select></div>
          <div class="form__row"><label class="form__label" for="suName">Name</label><input id="suName" class="form__input" required /></div>
          <div class="form__row"><label class="form__label" for="suEmail">Email</label><input id="suEmail" class="form__input" type="email" required /></div>
          <div class="form__row"><label class="form__label" for="suPass">Password</label><input id="suPass" class="form__input" type="password" required /></div>
          <button class="btn btn--primary" type="submit">Create account</button>
        </form>
      </div>

      <div class="container section">
        <form class="card" id="kycForm">
          <h3>KYC (for CHA)</h3>
          <div class="grid grid--3">
            <div class="form__row"><label class="form__label">PAN</label><input class="form__input" /></div>
            <div class="form__row"><label class="form__label">CHA License No.</label><input class="form__input" /></div>
            <div class="form__row"><label class="form__label">GSTIN</label><input class="form__input" /></div>
          </div>
          <div class="form__row"><label class="form__label">AEO status</label><select class="form__select"><option>None</option><option>AEO-T1</option><option>AEO-T2</option><option>AEO-T3</option></select></div>
          <button class="btn">Submit KYC</button>
        </form>
      </div>
    </section>

    <!-- ================= DASHBOARDS (placeholders) ================= -->
    <section id="dashboard-importer" class="section" hidden>
      <div class="container">
        <h2>Importer Dashboard</h2>
        <div class="grid grid--3">
          <div class="card"><strong>Saved quotes</strong><ul id="impQuotes"></ul></div>
          <div class="card"><strong>Chats</strong><div class="muted">Connect WhatsApp to sync</div></div>
          <div class="card"><strong>Invoices / receipts</strong><div class="muted">No invoices yet</div></div>
        </div>
      </div>
    </section>

    <section id="dashboard-cha" class="section" hidden>
      <div class="container">
        <h2>CHA Dashboard</h2>
        <div class="grid grid--3">
          <div class="card"><strong>Leads</strong><ul id="chaLeads"></ul></div>
          <div class="card"><strong>Calendar</strong><div class="muted">Sync Google Calendar</div></div>
          <div class="card"><strong>Pricing</strong><div class="muted">Add base fees / port-wise rates</div></div>
        </div>
      </div>
    </section>

    <!-- ================= LEGAL / STATIC (placeholder) ================= -->
    <section id="legal" class="section" hidden>
      <div class="container grid grid--3">
        <div class="card"><h3>Privacy</h3><p class="muted">We use data for quotes and compliance only. Encrypted at rest.</p></div>
        <div class="card"><h3>Terms</h3><p class="muted">Platform terms incl. dispute & refund policy.</p></div>
        <div class="card"><h3>EULA</h3><p class="muted">End-user license for apps & integrations.</p></div>
      </div>
    </section>

    <!-- ================= LEARN / PRICING (placeholder) ================= -->
    <section id="learn" class="section" hidden><div class="container"><h2>Guides</h2><p class="muted">HS classification, valuation, Incoterms, port playbooks.</p></div></section>
    <section id="pricing" class="section" hidden><div class="container"><h2>Pricing</h2><p class="muted">Free to browse. Pro features & escrow from ‚Çπ999/mo.</p></div></section>
  </main>

  <!-- ================= Footer ================= -->
  <footer class="footer">
    <div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap">
      <small>¬© <span id="year"></span> CHA.AI</small>
      <nav aria-label="Footer" style="display:flex;gap:.8rem;flex-wrap:wrap">
        <a href="#/legal">About</a>
        <a href="#/marketplace">Ports we cover</a>
        <a href="#/learn">HS code index</a>
        <a href="#/legal">Privacy</a>
        <a href="#/legal">Terms</a>
        <a href="#/legal">EULA</a>
        <a href="#/legal">Refunds</a>
        <a href="#/learn">Support</a>
        <a href="https://wa.me/0000000000">WhatsApp</a>
      </nav>
    </div>
  </footer>

  <!-- ================= WhatsApp + Chat (mock) ================= -->
  <a class="whatsapp" href="https://wa.me/0000000000" target="_blank" rel="noopener">WhatsApp</a>
  <aside class="chat" aria-live="polite">
    <button id="chatToggle" class="chat__toggle" aria-expanded="false" aria-controls="chatPanel" title="Open chat">üí¨</button>
    <div id="chatPanel" class="chat__panel" hidden>
      <div class="chat__header"><strong>Assistant</strong><button id="chatClose" class="btn">‚úï</button></div>
      <div id="chatLog" class="chat__log" role="log" aria-live="polite"></div>
      <form id="chatForm" class="chat__form" autocomplete="off">
        <label for="chatInput" class="sr-only">Type message</label>
        <input id="chatInput" class="chat__input" placeholder="Try: 'find JNPT CHA' or 'calc 8517 AV 100000'"/>
        <button class="btn btn--ghost" type="submit">Send</button>
      </form>
    </div>
  </aside>

  <!-- ================= App Script ================= -->
  <script>
    /* ---------------- Theme + Nav ---------------- */
    const root=document.documentElement, metaTheme=document.getElementById('meta-theme-color'), themeToggle=document.getElementById('themeToggle');
    const savedTheme=localStorage.getItem('theme'); function setTheme(m){root.setAttribute('data-theme',m);localStorage.setItem('theme',m);metaTheme?.setAttribute('content',m==='light'?'#ffffff':'#0B1B3B');themeToggle?.setAttribute('aria-pressed',String(m==='dark')); }
    setTheme(savedTheme || (matchMedia('(prefers-color-scheme: light)').matches ? 'light':'dark'));
    themeToggle?.addEventListener('click',()=>setTheme(root.getAttribute('data-theme')==='light'?'dark':'light'));
    document.getElementById('year').textContent=new Date().getFullYear();
    const navToggle=document.getElementById('navToggle'), navMenu=document.getElementById('navMenu');
    navToggle?.addEventListener('click',()=>{const open=navMenu.classList.toggle('is-open');navToggle.setAttribute('aria-expanded',String(open));});

    /* ---------------- Router (#/page[/id]) ---------------- */
    const sections=['home','marketplace','profile','calculator','rfp','auth','dashboard-importer','dashboard-cha','legal','learn','pricing'].map(id=>({id,el:document.getElementById(id)}));
    function route(){const hash=location.hash||'#/home'; const [_,page,param]=hash.split('/'); sections.forEach(s=>s.el&&(s.el.hidden=true));
      const show=id=>{const x=sections.find(s=>s.id===id); x?.el&&(x.el.hidden=false);};
      switch(page){
        case'home':show('home');break;
        case'marketplace':show('marketplace');renderList();break;
        case'profile':show('profile');renderProfile(Number(param));break;
        case'calculator':show('calculator');break;
        case'rfp':show('rfp');renderRFP();break;
        case'auth':show('auth');break;
        case'dashboard-importer':show('dashboard-importer');break;
        case'dashboard-cha':show('dashboard-cha');break;
        case'legal':show('legal');break;
        case'learn':show('learn');break;
        case'pricing':show('pricing');break;
        default:show('home');
      }
      navMenu?.classList.remove('is-open');navToggle?.setAttribute('aria-expanded','false');
    } addEventListener('hashchange',route); route();

    /* ---------------- Mock Data ---------------- */
    const PORTS=["Nhava Sheva (JNPT)","Mundra","Chennai","Kolkata","Delhi Air Cargo","Bangalore","Hyderabad","Cochin","Tuticorin","Ahmedabad ICD","Nagpur ICD","Tughlakabad ICD"];
    const CHAS=[
      {id:1,name:"Pacific Logistics",verified:true,aeo:"AEO-T1",rating:4.9,ratingCount:312,response:"12m",success:98,startPrice:6500,ports:["JNPT","Mundra","ICD TKD"],services:["Clearance + Transport","License handling"],langs:"EN + Hindi",badges:["Top Rated","Fast"],speed:"Under 2h", img:"https://images.unsplash.com/photo-1556761175-4b46a572b786?q=80&w=800&auto=format&fit=crop", specialties:["Electronics","Chemicals","Apparel"], licenses:["CHA 11/XXX","GSTIN 27XXXXX"], bio:"15+ yrs handling high-volume FCL/LCL & air cargo.", pricing:[{service:"Sea FCL (20ft)",range:"‚Çπ6,500‚Äì8,000"},{service:"Air (per MAWB)",range:"‚Çπ5,500‚Äì7,000"}]},
      {id:2,name:"Astra Customs",verified:true,aeo:"AEO-T2",rating:4.7,ratingCount:201,response:"15m",success:96,startPrice:5500,ports:["Mundra","JNPT","Chennai"],services:["Clearance only","Drawback"],langs:"EN",badges:["Verified"],speed:"Same day", img:"https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=800&auto=format&fit=crop", specialties:["Apparel","Furniture"], licenses:["CHA 11/YYY"], bio:"Drawback experts. Strong apparel/furniture corridors.", pricing:[{service:"Sea LCL",range:"‚Çπ4,000‚Äì6,000"}]},
      {id:3,name:"Metro ACI",verified:true,aeo:"",rating:4.6,ratingCount:154,response:"25m",success:95,startPrice:4800,ports:["Delhi Air Cargo","Bangalore","Hyderabad"],services:["Courier","Air","License handling"],langs:"EN + Hindi",badges:["Fast"],speed:"Under 2h", img:"https://images.unsplash.com/photo-1507679799987-c73779587ccf?q=80&w=800&auto=format&fit=crop", specialties:["Electronics","Pharma"], licenses:["CHA 11/ZZZ"], bio:"Air/courier specialists with rapid clearance.", pricing:[{service:"Air import",range:"‚Çπ5,000‚Äì7,500"}]},
    ];
    function fillPorts(sel){sel.innerHTML=PORTS.map(p=>`<option>${p}</option>`).join('');}
    fillPorts(document.getElementById('qsPort')); fillPorts(document.getElementById('fPort')); fillPorts(document.getElementById('cPort'));

    /* ---------------- Home: Featured + Teaser calc + Quick search ---------------- */
    const featuredGrid=document.getElementById('featuredGrid');
    featuredGrid.innerHTML=CHAS.map(c=>`
      <article class="card card--listing" role="listitem">
        <img src="${c.img}" alt="${c.name}" style="height:140px;border-radius:10px;border:1px solid var(--border);object-fit:cover">
        <div class="listing__meta">
          <div><strong>${c.name}</strong> ${c.verified?'<span class="chip">Verified</span>':''} ${c.aeo?`<span class="chip">${c.aeo}</span>`:''}</div>
          <div class="badge"><span class="stars">‚òÖ</span> ${c.rating} (${c.ratingCount})</div>
        </div>
        <div class="muted" style="margin:.25rem 0">${c.ports.join(' ‚Ä¢ ')}</div>
        <div class="muted">${c.specialties.join(', ')}</div>
        <div class="listing__footer">
          <div><span class="muted">Starts</span> <strong>‚Çπ ${c.startPrice}</strong></div>
          <div style="display:flex;gap:.4rem">
            <a class="btn" href="#/profile/${c.id}">View</a>
            <a class="btn btn--primary" href="#/rfp" data-preselect="${c.id}">Get Quote</a>
          </div>
        </div>
      </article>`).join('');

    document.getElementById('teaserCalc').addEventListener('click',()=>{
      const av=Number(document.getElementById('teaserAV').value||0);
      const bcd=av*0.10, sws=bcd*0.10, sub=av+bcd+sws, igst=sub*0.18, total=sub+igst;
      document.getElementById('teaserOut').innerHTML=`
        <span class="badge">BCD: ‚Çπ ${bcd.toFixed(0)}</span>
        <span class="badge">SWS: ‚Çπ ${sws.toFixed(0)}</span>
        <span class="badge">IGST: ‚Çπ ${igst.toFixed(0)}</span>
        <span class="chip">Total: ‚Çπ ${total.toFixed(0)}</span>`;
    });

    document.getElementById('qsSearch').addEventListener('click',()=>{
      const port=document.getElementById('qsPort').value; const svc=document.getElementById('qsService').value; const comm=document.getElementById('qsCommodity').value.trim();
      location.hash='#/marketplace'; setTimeout(()=>{ document.getElementById('fPort').value=port; document.getElementById('fServices').value=svc; document.getElementById('fSearch').value=comm; renderList(); },0);
    });

    /* ---------------- Marketplace: filters, list, compare/save/share ---------------- */
    const listGrid=document.getElementById('listGrid'), countSpan=document.getElementById('countSpan'), fSearch=document.getElementById('fSearch'), fSort=document.getElementById('fSort');
    let compareSet=new Set();
    function passesFilters(c){
      const port=document.getElementById('fPort').value, svc=document.getElementById('fServices').value, budget=Number(document.getElementById('fBudget').value||Infinity);
      const speed=document.getElementById('fSpeed').value, lang=document.getElementById('fLang').value, sla=document.getElementById('fSLA').value;
      const q=fSearch.value.trim().toLowerCase();
      const bad={v:document.getElementById('bVerified').checked,t:document.getElementById('bTopRated').checked,f:document.getElementById('bFast').checked,a:document.getElementById('bAEO').checked};
      const matchQ=!q||c.name
