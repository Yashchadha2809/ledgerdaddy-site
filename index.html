<!doctype html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Starter Site â€” Chatbot â€¢ Calculator â€¢ Marketplace</title>
  <meta name="description" content="A simple modern site with a chatbot, calculator, and marketplace on the main page." />

  <!-- SEO basics -->
  <link rel="canonical" href="https://example.com/" />

  <style>
    /* =============== CSS RESET (minimal) =============== */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;line-height:1.5;-webkit-font-smoothing:antialiased}
    img,svg,video{display:block;max-width:100%}
    input,button,select,textarea{font:inherit}
    :root{
      --bg: #0b1220;
      --bg-soft:#111827;
      --panel:#0f172a;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --brand:#8b5cf6; /* violet-500 */
      --brand-2:#22c55e; /* green-500 */
      --card:#0b1220;
      --border:#1f2937;
      --focus:#f59e0b;
      --shadow: 0 8px 24px rgba(0,0,0,.25);
    }
    [data-theme="light"]{
      --bg: #f7fafc;
      --bg-soft:#f1f5f9;
      --panel:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --brand:#7c3aed;
      --brand-2:#16a34a;
      --card:#ffffff;
      --border:#e2e8f0;
      --shadow: 0 8px 24px rgba(2,6,23,.08);
    }

    /* =============== LAYOUT =============== */
    body.page{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Noto Sans", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 600px at 20% -10%, rgba(124,58,237,.15), transparent 60%),
                  radial-gradient(1200px 600px at 80% -10%, rgba(34,197,94,.15), transparent 60%),
                  var(--bg);
      min-height:100%;
    }
    .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{left:1rem;top:1rem;width:auto;height:auto;background:var(--panel);color:var(--text);padding:.5rem .75rem;border-radius:.5rem;outline:2px solid var(--focus)}
    .container{width:min(1100px, 92%);margin-inline:auto}
    .section{padding:3.5rem 0}
    .header{
      position:sticky;top:0;z-index:50;
      background:rgba(0,0,0,.25);
      backdrop-filter: blur(8px);
      border-bottom:1px solid var(--border);
    }
    .header__inner{display:flex;align-items:center;gap:1rem;justify-content:space-between;padding:.75rem 0}
    .brand{display:flex;align-items:center;gap:.6rem;color:inherit;text-decoration:none}
    .brand__logo{display:grid;place-items:center;width:32px;height:32px;border-radius:8px;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;font-weight:800}
    .nav__menu{display:flex;gap:1rem;list-style:none;margin:0;padding:0}
    .nav__link{color:var(--muted);text-decoration:none}
    .nav__link:focus,.nav__link:hover{color:var(--text)}
    .theme-toggle, .nav__toggle{appearance:none;border:1px solid var(--border);background:var(--panel);color:var(--text);padding:.5rem .7rem;border-radius:.6rem;cursor:pointer}
    .nav__toggle{display:none}

    .hero{padding:3rem 0}
    .hero__inner{display:grid;gap:1rem}
    .hero__title{font-size:clamp(1.6rem,2.5vw,2.2rem);margin:0}
    .hero__cta{display:flex;gap:.75rem;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:.5rem;border:1px solid var(--border);padding:.65rem 1rem;border-radius:.7rem;cursor:pointer;text-decoration:none}
    .btn--primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));border-color:transparent;color:#fff}
    .btn--ghost{background:var(--panel);color:var(--text)}

    /* Three columns on desktop */
    .grid{
      display:grid;gap:1.25rem;
      grid-template-columns: repeat(12,minmax(0,1fr));
    }
    .col-4{grid-column: span 4}
    .col-8{grid-column: span 8}
    @media (max-width: 960px){
      .nav__toggle{display:inline-block}
      .nav__menu{display:none;position:absolute;right:1rem;top:60px;background:var(--panel);padding:.75rem;border-radius:.5rem;border:1px solid var(--border);box-shadow:var(--shadow)}
      .nav__menu.is-open{display:flex;flex-direction:column}
      .col-4,.col-8{grid-column:1/-1}
    }

    /* =============== CARDS / PANELS =============== */
    .card{
      background:linear-gradient(0deg, rgba(255,255,255,.02), rgba(255,255,255,0)) , var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow: var(--shadow);
      padding:1rem;
    }
    .card__title{margin-top:0;font-size:1.1rem}

    /* =============== CALCULATOR =============== */
    .calc__form{display:grid;gap:.75rem}
    .form__row{display:grid;gap:.3rem}
    .form__label{font-weight:600}
    .form__input,.form__select{
      background:var(--panel);color:var(--text);border:1px solid var(--border);
      border-radius:.6rem;padding:.6rem .7rem
    }
    .calc__outputs{display:flex;gap:1rem;flex-wrap:wrap;margin-top:.25rem}
    .calc__output{background:var(--bg-soft);border:1px solid var(--border);padding:.5rem .75rem;border-radius:.5rem}

    /* =============== MARKETPLACE =============== */
    .market__controls{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:.75rem}
    .market__grid{display:grid;gap:.9rem;grid-template-columns: repeat(auto-fit,minmax(200px,1fr))}
    .product{display:grid;gap:.5rem;border:1px solid var(--border);padding:.75rem;border-radius:.75rem;background:var(--panel)}
    .product__img{height:130px;background:linear-gradient(135deg, var(--bg-soft), var(--panel));border-radius:.5rem;border:1px solid var(--border);display:grid;place-items:center;color:var(--muted);font-weight:700}
    .product__name{margin:.1rem 0}
    .product__price{color:var(--brand-2);font-weight:700}
    .badge{display:inline-block;padding:.15rem .5rem;border-radius:999px;border:1px solid var(--border);color:var(--muted);font-size:.8rem}

    .cart{
      display:flex;align-items:center;gap:.5rem
    }
    .cart__count{display:inline-grid;place-items:center;min-width:22px;height:22px;border-radius:999px;background:var(--brand);color:#fff;font-size:.8rem}

    /* =============== CHATBOT (floating) =============== */
    .chat{
      position:fixed;right:1rem;bottom:1rem;z-index:60;
    }
    .chat__toggle{
      background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;border:none;border-radius:999px;
      width:56px;height:56px;display:grid;place-items:center;cursor:pointer;box-shadow:var(--shadow)
    }
    .chat__panel{
      position:fixed;right:1rem;bottom:4.5rem;width:min(360px,92vw);
      background:var(--panel);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);overflow:hidden
    }
    .chat__header{padding:.6rem .8rem;background:var(--bg-soft);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
    .chat__log{max-height:320px;overflow:auto;padding:.75rem;display:grid;gap:.5rem}
    .bubble{padding:.5rem .7rem;border-radius:.6rem;max-width:85%}
    .bubble--ai{background:var(--bg-soft);border:1px solid var(--border)}
    .bubble--me{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;justify-self:end}
    .chat__form{display:flex;gap:.4rem;padding:.6rem;border-top:1px solid var(--border)}
    .chat__input{flex:1;background:var(--panel);border:1px solid var(--border);border-radius:.6rem;padding:.55rem .7rem;color:var(--text)}
    .chat__send{border:1px solid var(--border);background:var(--bg-soft);border-radius:.6rem;padding:.5rem .7rem;color:var(--text);cursor:pointer}

    /* Focus & a11y */
    :focus-visible{outline:2px solid var(--focus);outline-offset:2px}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body class="page">
  <a class="skip-link" href="#main">Skip to content</a>

  <!-- Header -->
  <header class="header" role="banner">
    <div class="container header__inner">
      <a class="brand" href="#" aria-label="Home">
        <span class="brand__logo" aria-hidden="true">â—†</span>
        <span class="brand__name">Starter</span>
      </a>

      <nav class="nav" aria-label="Primary">
        <button class="nav__toggle" aria-expanded="false" aria-controls="navMenu">Menu</button>
        <ul class="nav__menu" id="navMenu">
          <li><a class="nav__link" href="#calculator">Calculator</a></li>
          <li><a class="nav__link" href="#marketplace">Marketplace</a></li>
          <li><a class="nav__link" href="#about">About</a></li>
        </ul>
      </nav>

      <div class="cart" aria-label="Cart">
        <span>ðŸ›’</span><span class="cart__count" id="cartCount" aria-live="polite">0</span>
      </div>

      <button class="theme-toggle" id="themeToggle" aria-pressed="false" aria-label="Toggle dark/light">ðŸŒ—</button>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container hero__inner">
      <h1 class="hero__title">Build. Test. Ship â€” all in one page.</h1>
      <p class="hero__tagline">Chat with the bot, calculate totals, and add items from the marketplace. Mobile-friendly and accessible.</p>
      <div class="hero__cta">
        <a class="btn btn--primary" href="#marketplace">Explore Marketplace</a>
        <a class="btn btn--ghost" href="#calculator">Open Calculator</a>
      </div>
    </div>
  </section>

  <main id="main">
    <section class="section">
      <div class="container grid">
        <!-- Calculator -->
        <div class="card col-4" id="calculator" aria-labelledby="calcTitle">
          <h2 class="card__title" id="calcTitle">Calculator</h2>
          <form class="calc__form" id="calcForm" novalidate>
            <div class="form__row">
              <label class="form__label" for="numA">Number A</label>
              <input class="form__input" id="numA" name="numA" type="number" step="any" required placeholder="e.g., 12.5" />
            </div>
            <div class="form__row">
              <label class="form__label" for="op">Operation</label>
              <select class="form__select" id="op" name="op" aria-label="Operation">
                <option value="+">Add (+)</option>
                <option value="-">Subtract (âˆ’)</option>
                <option value="*">Multiply (Ã—)</option>
                <option value="/">Divide (Ã·)</option>
                <option value="%">Percent of (A % of B)</option>
              </select>
            </div>
            <div class="form__row">
              <label class="form__label" for="numB">Number B</label>
              <input class="form__input" id="numB" name="numB" type="number" step="any" required placeholder="e.g., 3" />
            </div>
            <div class="calc__outputs" aria-live="polite">
              <div class="calc__output"><strong>Result:</strong> <span id="calcResult">0</span></div>
            </div>
          </form>
        </div>

        <!-- Marketplace -->
        <div class="card col-8" id="marketplace" aria-labelledby="marketTitle">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:.75rem;flex-wrap:wrap">
            <h2 class="card__title" id="marketTitle">Marketplace</h2>
            <span class="badge" id="marketMeta" aria-live="polite">0 items</span>
          </div>

          <div class="market__controls">
            <label class="sr-only" for="search">Search</label>
            <input id="search" class="form__input" type="search" placeholder="Search productsâ€¦" />
            <label class="sr-only" for="category">Category</label>
            <select id="category" class="form__select">
              <option value="all">All categories</option>
              <option value="software">Software</option>
              <option value="hardware">Hardware</option>
              <option value="courses">Courses</option>
            </select>
            <label class="sr-only" for="sort">Sort by</label>
            <select id="sort" class="form__select">
              <option value="featured">Featured</option>
              <option value="price-asc">Price: Low â†’ High</option>
              <option value="price-desc">Price: High â†’ Low</option>
            </select>
          </div>

          <div class="market__grid" id="marketGrid" role="list"></div>
        </div>
      </div>
    </section>

    <section id="about" class="section">
      <div class="container card">
        <h2 class="card__title">About</h2>
        <p>This is a minimal, production-minded starter built with semantic HTML, accessible components, and no external dependencies. You can wire the chatbot to your API and replace the placeholder product data with your backend or a headless CMS.</p>
      </div>
    </section>
  </main>

  <!-- Floating Chatbot -->
  <aside class="chat" aria-live="polite">
    <button class="chat__toggle" id="chatToggle" aria-expanded="false" aria-controls="chatPanel" title="Open chat">ðŸ’¬</button>
    <div class="chat__panel" id="chatPanel" hidden>
      <div class="chat__header">
        <strong>Assistant</strong>
        <button class="theme-toggle" id="chatClose" aria-label="Close chat">âœ•</button>
      </div>
      <div class="chat__log" id="chatLog" role="log" aria-live="polite"></div>
      <form class="chat__form" id="chatForm" autocomplete="off">
        <label for="chatInput" class="sr-only">Type your message</label>
        <input class="chat__input" id="chatInput" type="text" placeholder="Try: help, time, total, calc 12+7" />
        <button class="chat__send" type="submit">Send</button>
      </form>
    </div>
  </aside>

  <footer class="section" role="contentinfo">
    <div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap">
      <small>Â© <span id="year"></span> Starter</small>
      <div style="display:flex;gap:.75rem;align-items:center">
        <a class="nav__link" href="#">Privacy</a>
        <a class="nav__link" href="#">Terms</a>
      </div>
    </div>
  </footer>

  <!-- =============== SCRIPT =============== -->
  <script>
    /* =========================================================
       THEME TOGGLE (persisted) + header nav toggle
    ========================================================= */
    const themeToggle = document.getElementById('themeToggle');
    const metaThemeColor = document.querySelector('meta[name="theme-color"]');
    const root = document.documentElement;
    const savedTheme = localStorage.getItem('theme');
    const setTheme = (mode) => {
      root.setAttribute('data-theme', mode);
      localStorage.setItem('theme', mode);
      // update address bar color if present
      if (metaThemeColor) {
        metaThemeColor.setAttribute('content', mode === 'light' ? '#ffffff' : '#0f172a');
      }
      // reflect pressed state
      if (themeToggle) themeToggle.setAttribute('aria-pressed', mode === 'dark' ? 'true' : 'false');
    };
    setTheme(savedTheme || (matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark'));
    themeToggle?.addEventListener('click', () => {
      const next = root.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      setTheme(next);
    });

    const navToggle = document.querySelector('.nav__toggle');
    const navMenu = document.getElementById('navMenu');
    navToggle?.addEventListener('click', () => {
      const open = navMenu.classList.toggle('is-open');
      navToggle.setAttribute('aria-expanded', String(open));
    });

    document.getElementById('year').textContent = new Date().getFullYear();

    /* =========================================================
       CALCULATOR (safe operations, no eval)
    ========================================================= */
    const calcForm = document.getElementById('calcForm');
    const numA = document.getElementById('numA');
    const numB = document.getElementById('numB');
    const op = document.getElementById('op');
    const calcResult = document.getElementById('calcResult');

    function compute(a, b, op) {
      const A = Number(a), B = Number(b);
      if (Number.isNaN(A) || Number.isNaN(B)) return 'â€”';
      switch (op) {
        case '+': return (A + B).toFixed(4).replace(/\.?0+$/,'');
        case '-': return (A - B).toFixed(4).replace(/\.?0+$/,'');
        case '*': return (A * B).toFixed(4).replace(/\.?0+$/,'');
        case '/': return B === 0 ? 'âˆž' : (A / B).toFixed(4).replace(/\.?0+$/,'');
        case '%': return ((A/100) * B).toFixed(4).replace(/\.?0+$/,''); // A% of B
        default: return 'â€”';
      }
    }
    function updateCalc() {
      calcResult.textContent = compute(numA.value, numB.value, op.value);
    }
    calcForm?.addEventListener('input', updateCalc);

    /* =========================================================
       MARKETPLACE (search/filter/sort + cart with localStorage)
    ========================================================= */
    const products = [
      {id:1, name:'Pro Chat Widget', price:19, category:'software'},
      {id:2, name:'AI Image Credits (100)', price:12, category:'software'},
      {id:3, name:'USB-C Hub (8-in-1)', price:39, category:'hardware'},
      {id:4, name:'Mechanical Keyboard', price:79, category:'hardware'},
      {id:5, name:'Frontend Masterclass', price:59, category:'courses'},
      {id:6, name:'Backend Bootcamp', price:89, category:'courses'},
    ];
    const marketGrid = document.getElementById('marketGrid');
    const marketMeta = document.getElementById('marketMeta');
    const search = document.getElementById('search');
    const category = document.getElementById('category');
    const sort = document.getElementById('sort');
    const cartCount = document.getElementById('cartCount');

    const CART_KEY = 'starter_cart_v1';
    const loadCart = () => JSON.parse(localStorage.getItem(CART_KEY) || '[]');
    const saveCart = (items) => localStorage.setItem(CART_KEY, JSON.stringify(items));
    const setCartBadge = () => { cartCount.textContent = loadCart().reduce((n,i)=>n+i.qty,0); };

    function productCard(p){
      return `
        <article class="product" role="listitem" aria-label="${p.name}">
          <div class="product__img" aria-hidden="true">IMG</div>
          <div>
            <h3 class="product__name">${p.name}</h3>
            <div style="display:flex;align-items:center;justify-content:space-between">
              <span class="product__price">â‚¹ ${p.price}</span>
              <span class="badge">${p.category}</span>
            </div>
          </div>
          <button class="btn btn--primary" data-add="${p.id}" aria-label="Add ${p.name} to cart">Add to cart</button>
        </article>
      `;
    }
    function renderList(list){
      marketGrid.innerHTML = list.map(productCard).join('');
      marketMeta.textContent = `${list.length} item${list.length!==1?'s':''}`;
    }
    function currentList(){
      let q = search.value.trim().toLowerCase();
      let cat = category.value;
      let filtered = products.filter(p => (cat==='all' || p.category===cat) && p.name.toLowerCase().includes(q));
      if (sort.value==='price-asc') filtered.sort((a,b)=>a.price-b.price);
      else if (sort.value==='price-desc') filtered.sort((a,b)=>b.price-a.price);
      return filtered;
    }
    renderList(currentList());
    setCartBadge();

    [search, category, sort].forEach(el => el.addEventListener('input', ()=>renderList(currentList())));
    marketGrid.addEventListener('click', (e)=>{
      const id = e.target?.dataset?.add;
      if(!id) return;
      const cart = loadCart();
      const idx = cart.findIndex(i=>i.id===Number(id));
      if(idx>-1) cart[idx].qty += 1; else cart.push({id:Number(id), qty:1});
      saveCart(cart); setCartBadge();
      e.target.textContent = 'Added âœ“'; setTimeout(()=> e.target.textContent='Add to cart', 900);
    });

    /* =========================================================
       CHATBOT (simple scripted intents; safe DOM updates)
       Replace `mockReply` with your API call later.
    ========================================================= */
    const chatToggle = document.getElementById('chatToggle');
    const chatPanel = document.getElementById('chatPanel');
    const chatClose = document.getElementById('chatClose');
    const chatLog = document.getElementById('chatLog');
    const chatForm = document.getElementById('chatForm');
    const chatInput = document.getElementById('chatInput');

    function openChat(){ chatPanel.hidden = false; chatToggle.setAttribute('aria-expanded','true'); chatInput.focus(); }
    function closeChat(){ chatPanel.hidden = true; chatToggle.setAttribute('aria-expanded','false'); }

    chatToggle.addEventListener('click', ()=> chatPanel.hidden ? openChat() : closeChat());
    chatClose.addEventListener('click', closeChat);

    function bubble(text, who='ai'){
      const b = document.createElement('div');
      b.className = 'bubble ' + (who==='me' ? 'bubble--me' : 'bubble--ai');
      b.textContent = text; // safe: no HTML injection
      chatLog.appendChild(b);
      chatLog.scrollTop = chatLog.scrollHeight;
    }
    function parseInlineCalc(s){
      const m = s.match(/(-?\d+(?:\.\d+)?)\s*([+\-*/])\s*(-?\d+(?:\.\d+)?)/);
      if(!m) return null;
      const A = parseFloat(m[1]); const op = m[2]; const B = parseFloat(m[3]);
      if(op==='/' && B===0) return 'âˆž';
      const val = op==='+'?A+B:op==='-'?A-B:op==='*'?A*B:A/B;
      return Number(val.toFixed(6)).toString();
    }
    function mockReply(msg){
      const text = msg.trim().toLowerCase();
      if (!text) return "Say 'help' to see what I can do.";
      if (text === 'help') return "I can: (1) answer time with 'time', (2) show cart total with 'total', (3) quick math: 'calc 12+7' or type an expression like '5*9', (4) type 'market' to get a link to products, (5) 'clear' to reset chat.";
      if (text === 'time') return "Local time: " + new Date().toLocaleString();
      if (text === 'total') return "Items in cart: " + (loadCart().reduce((n,i)=>n+i.qty,0));
      if (text === 'market') return "Use the Marketplace section on this page. Try search, filter, and sort!";
      if (text === 'clear') { chatLog.innerHTML=''; return "Chat cleared. âœ¨"; }
      if (text.startsWith('calc ')) {
        const res = parseInlineCalc(text.slice(5));
        return res ? ("Result: " + res) : "Please use e.g. 'calc 12+7', 'calc 9/3', 'calc 5*2'.";
      }
      const res2 = parseInlineCalc(text);
      if (res2) return "Result: " + res2;
      return "Got it! (This is a demo bot.) Wire me to your API for real answers.";
    }

    chatForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const msg = chatInput.value;
      if(!msg.trim()) return;
      bubble(msg, 'me');
      chatInput.value='';
      setTimeout(()=> bubble(mockReply(msg), 'ai'), 150);
    });

    /* =========================================================
       SMALL ENHANCEMENTS
    ========================================================= */
    // close menu after clicking a link (mobile)
    navMenu?.addEventListener('click', (e)=>{
      if(e.target.matches('a')) { navMenu.classList.remove('is-open'); navToggle?.setAttribute('aria-expanded','false'); }
    });

    // keyboard open chat with "/" (except in inputs)
    document.addEventListener('keydown', (e)=>{
      if (e.key === '/' && document.activeElement?.tagName !== 'INPUT' && document.activeElement?.tagName !== 'TEXTAREA'){
        e.preventDefault(); openChat();
      }
    });
  </script>
</body>
</html>
